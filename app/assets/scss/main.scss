/*=======================================================
               REGISTER-TAILWIND
=========================================================*/
@tailwind base;
@tailwind components;
@tailwind utilities;

/* âœ… PrimeVue â†’ Tailwind overrides */

/* Light mode */
:root {
  /* Backgrounds */
  --p-surface-ground: theme('colors.light.surface'); /* outer app bg */
  --p-surface-card: theme('colors.light.divider'); /* card / table bg */
  --p-surface-overlay: theme('colors.light.DEFAULT'); /* overlay surfaces */
  --p-content-border-color: theme('colors.light.50'); /* borders */

  /* Text */
  --p-text-color: theme('colors.light.heading'); /* primary text */
  --p-text-muted-color: theme('colors.light.50'); /* muted/secondary */

  /* Primary / highlight */
  --p-primary-color: theme('colors.blue.600'); /* pick your brand color */
  --p-primary-hover-color: theme('colors.blue.700');
  --p-primary-active-color: theme('colors.blue.800');

  /* States */
  --p-highlight-bg: theme('colors.light.50'); /* row hover/active bg */
  --p-highlight-text-color: theme('colors.light.heading');
}

/* Dark mode */
.dark {
  /* Backgrounds */
  --p-surface-ground: theme('colors.dark.surface'); /* outer app bg */
  --p-surface-card: theme('colors.dark.divider'); /* card / table bg */
  --p-surface-overlay: theme('colors.dark.knight'); /* overlay surfaces */
  --p-content-border-color: theme('colors.dark.hover'); /* borders */

  /* Text */
  --p-text-color: theme('colors.light.DEFAULT'); /* light text */
  --p-text-muted-color: theme('colors.dark.hover'); /* muted text */

  /* Primary / highlight */
  --p-primary-color: theme('colors.blue.400'); /* lighter for dark mode */
  --p-primary-hover-color: theme('colors.blue.300');
  --p-primary-active-color: theme('colors.blue.200');

  /* States */
  --p-highlight-bg: theme('colors.dark.knight'); /* row hover/active bg */
  --p-highlight-text-color: theme('colors.light.DEFAULT');
}

/*=======================================================
               ðŸŽ¨ Application Fonts
=========================================================*/
@import url('https://fonts.googleapis.com/css2?family=Baloo+Da+2:wght@400..800&family=Hind+Siliguri:wght@300;400;500;600;700&family=Noto+Serif+Bengali:wght@100..900&family=Tiro+Bangla:ital@0;1&display=swap');

/*=======================================================
                        BASE LAYER
=========================================================*/
@layer base {
  ::selection {
    @apply bg-primary text-light;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-gray-200 text-dark dark:bg-dark-surface dark:text-white font-base text-sizeDefault font-normal;
    overflow-x: hidden;
    position: relative;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
    -webkit-scroll-snap-type: y mandatory;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  img {
    @apply cursor-pointer max-w-full h-auto;
  }

  a,
  button {
    @apply cursor-pointer;
  }

  p {
    line-height: 1.76;
  }

  /* BRAND-LOGO */
  .logo {
    @apply w-full h-full flex items-center justify-center overflow-hidden; //sm:h-7 md:h-7.5 lg:h-8

    img {
      @apply w-full h-full object-contain;
    }
  }

  /* ROUTER-LINKS-ACTIVE */
  .router-link-active,
  .router-link-exact-active {
    &:hover {
      @apply border-white dark:border-gray-300;
    }

    // Duplication Cleanup: Combine common active link style
    &:not(.router-link-exact-active.mobile-link) {
      @apply border-b-primary;
    }
  }

  /* HEADER */
  .header-link {
    @apply border-b-4 border-transparent text-dark-surface dark:text-white font-bengali text-sizeMedium font-normal md:text-sizeBig;

    &:hover {
      &:not(.router-link-active),
      &:not(.router-link-exact-active) {
        @apply border-b-primary;
      }
    }

    &.router-link-active,
    &.router-link-exact-active {
      @apply border-b-primary;
    }
  }
}

/*=======================================================
                        UTILITIES LAYER
=========================================================*/
@layer utilities {
  /* APP-PAGE-TRANSITIONS */
  .page-enter-active,
  .page-leave-active {
    @apply transition-all duration-400;
  }

  .page-enter-from,
  .page-leave-to {
    @apply opacity-0 blur-4;
  }

  /* APP-CONTAINER */
  .jonopath-container {
    @apply max-w-63 w-full h-full mx-auto px-2 ss:px-4;
  }

  .redirect {
    @apply relative after:inline-block after:w-4 after:text-left after:animate-ellipsis;
  }

  /* SCROLLBAR-NONE CLEANUP (à¦¸à¦‚à¦¶à§‹à¦§à¦¿à¦¤) */
  .scrollbar-none {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  /* MAX-WIDTH */
  .scrollable-nav {
    @apply max-md:whitespace-nowrap max-md:overflow-x-scroll max-md:scroll-auto max-md:scrollbar-none max-md:max-w-[calc(100%-theme(spacing.3))];
  }

  /* SLIDE-LEAVE-ANIMATION(OFFCANVAS) - No changes here */
  .slide-enter-from {
    transform: translateX(-100%);
  }

  .slide-enter-to {
    transform: translateX(0);
  }

  .slide-leave-from {
    transform: translateX(0);
  }

  .slide-leave-to {
    transform: translateX(-100%);
  }

  .slide-enter-active,
  .slide-leave-active {
    transition: transform 0.3s ease;
  }

  /* Animation helpers as utilities - No changes here */
  .animate-slide-up {
    animation: slideUp 0.4s ease-out forwards;
  }
  .animate-slide-up-fade {
    animation: slideUpFade 0.3s forwards;
  }
  .animate-slide-down {
    animation: slideDownFade 0.3s forwards;
  }
  .animate-slide-up-bottom {
    animation: slideUpFadeBottom 0.3s forwards;
  }
  .animate-slide-down-bottom {
    animation: slideDownFadeBottom 0.3s forwards;
  }

  /* HAMBURGER-MENU-ANIMATION - No changes here */
  .collapse-enter-from,
  .collapse-leave-to {
    @apply max-h-0;
  }

  .collapse-enter-to,
  .collapse-leave-from {
    @apply max-h-36.5;
  }

  .collapse-enter-active,
  .collapse-leave-active {
    // transition: max-height 0.3s ease;
    @apply overflow-hidden transition-max-height duration-300 ease-max;
  }
}

/*=======================================================
                        COMPONENTS LAYER
=========================================================*/
@layer components {
  /* TOPBAR - No changes here */
  .topbar {
    @apply bg-green-900 flex items-center w-full h-20 md:h-24; //h-11 xs:h-15 sm:h-16

    &-link {
      @apply h-full py-1 border-b-4 border-transparent hover:border-b-white dark:hover:border-gray-300 flex items-center justify-center px-0.125;

      &.router-link-active,
      &.router-link-exact-active {
        &:hover {
          &:not(.router-link-exact-active.mobile-link) {
            @apply border-white dark:border-gray-300;
          }
        }
      }
    }
  }

  /* MOBILE LINK - No changes here */
  .mobile-link {
    @apply text-dark-surface dark:text-white align-middle;

    &-text {
      @apply inline-flex pl-1 border-l-4 border-transparent align-middle font-bengali text-sizeMedium font-normal;
    }

    &:hover {
      &:not(.router-link-active),
      &:not(.router-link-exact-active) {
        .mobile-link-text {
          @apply border-l-primary;
        }
      }
    }

    &.router-link-active,
    &.router-link-exact-active {
      .mobile-link-text {
        @apply border-l-primary;
      }
    }
  }

  /* SCROLLBAR DUPLICATION FIX: Keeping them separate for guaranteed functionality */
  .hamburger {
    @apply h-screen overflow-x-hidden overflow-y-auto whitespace-nowrap scroll-auto scrollbar-none;
  }

  .offcanvas {
    @apply h-screen overflow-x-hidden overflow-y-auto whitespace-nowrap scroll-auto scrollbar-none;
  }

  /* FOOTER-LIST - No changes here */
  .footer-list {
    @apply grid gap-x-2 [grid-template-rows:repeat(3,auto)] [grid-template-columns:repeat(2,1fr)] [column-count:2] pb-2 md:gap-x-4 md:[grid-template-rows:repeat(3,auto)] md:[grid-template-columns:repeat(3,1fr)] md:[column-count:3] lg:[grid-template-columns:repeat(4,1fr)] lg:[column-count:4];

    &-item {
      @apply py-2;

      &:first-of-type {
        @apply col-span-full border-b border-dark-divider w-full mb-2;
      }
    }

    &-link {
      @apply text-sm ss:text-sizeSmall font-bold py-3 md:text-sizeDefault transition-all hover:underline;
    }
  }

  /* NEWS-LISTS (Hover/Visited Cleanup) */
  .main-news-list,
  .selected-news-list,
  .others-news-list,
  .topic-list {
    // Apply common padding/spacing if necessary (here only pt-2)
    &-item {
      @apply pt-2; // Common padding

      // Combine hover/visited for all news links here
      .main-news-link,
      .selected-news-link,
      .others-news-link,
      .topic-list-link {
        &:hover,
        &:visited {
          .main-news-article h2,
          .selected-news-article h2,
          .others-news-article h2,
          .topic-list-article h2 {
            @apply text-dark-hover dark:text-white underline;
          }
        }
      }
    }
  }

  /* MAIN NEWS LIST */
  .main-news-list {
    @apply grid grid-cols-2 gap-4 mb-10 md:grid-cols-3 lg:grid-cols-4;

    &-item {
      // pt-2 is combined above
      .main-news-article {
        h2 {
          @apply text-dark-surface hover:text-dark-hover dark:text-light dark:hover:text-white text-sizeBig font-bold sm:mb-2 md:text-sizeLg max-xs:line-clamp-2;
        }

        p {
          @apply hidden;
        }

        time {
          @apply text-xs text-dark-hover dark:text-light inline-block;
        }
      }

      // ... (rest of nth-child styles are too specific to merge, kept as is)
      &:first-child {
        @apply row-span-3 col-span-2 md:row-span-2 border-0;

        .main-news-article {
          h2 {
            @apply text-sizeXl md:text-sizeXXl;
          }

          p {
            @apply md:block mb-2;
          }
        }
      }

      &:nth-child(2),
      &:nth-child(3),
      &:nth-child(4),
      &:nth-child(5),
      &:nth-child(6),
      &:nth-child(7) {
        @apply row-span-1 col-span-2 ss:row-span-2 ss:col-span-1 border-t border-light-50 dark:border-dark-divider ss:border-0;

        .main-news-article {
          @apply max-xs:flex;

          .main-news-thumbnail {
            @apply max-xs:w-1/3;
          }

          .main-news-details {
            @apply max-xs:w-2/3 max-xs:pl-2;
          }
        }
      }

      &:nth-child(2),
      &:nth-child(3) {
        @apply md:row-span-1 md:col-span-1;
      }

      &:nth-child(4),
      &:nth-child(5),
      &:nth-child(6) {
        @apply md:row-span-1 md:col-span-1;
      }

      &:nth-child(8),
      &:nth-child(9) {
        @apply row-span-1 col-span-2 border-t border-light-50 dark:border-dark-divider;

        .main-news-article {
          @apply flex;

          .main-news-thumbnail {
            @apply w-1/3;
          }

          .main-news-details {
            @apply w-2/3 pl-2;
          }
        }
      }

      &:nth-child(7),
      &:nth-child(8),
      &:nth-child(9) {
        @apply md:row-span-1 md:col-span-1;

        .main-news-article {
          @apply md:flex;

          .main-news-thumbnail {
            @apply md:hidden;
          }

          .main-news-details {
            @apply md:w-full md:pl-0;
          }
        }
      }

      &:nth-child(7) {
        @apply md:border-t md:border-light-50 md:dark:border-dark-divider;
      }

      &:nth-child(6) {
        @apply lg:border-t lg:border-light-50 lg:dark:border-dark-divider lg:row-span-1 lg:col-span-1;

        .main-news-article {
          .main-news-thumbnail {
            @apply lg:hidden;
          }

          .main-news-details {
            @apply lg:w-full lg:pl-0;
          }
        }
      }
    }
  }

  /* SELECTED NEWS LIST */
  .selected-news-list {
    @apply grid grid-cols-2 gap-4 mb-5 md:mb-10 md:grid-cols-3 lg:grid-cols-4;

    &-item {
      // pt-2 is combined above
      .selected-news-article {
        .selected-news-details {
          h2 {
            @apply text-dark-surface hover:text-dark-hover dark:text-light dark:hover:text-white text-sizeBig font-bold sm:mb-2 md:text-sizeLg leading-6 max-xs:line-clamp-2;
          }

          p {
            @apply hidden;
          }

          time {
            @apply text-xs text-dark-hover dark:text-light inline-block;
          }
        }
      }

      // ... (rest of nth-child styles are too specific to merge, kept as is)
      &:first-child {
        @apply row-span-3 col-span-2 md:row-span-2 border-0;

        .selected-news-article {
          .selected-news-details {
            h2 {
              @apply text-sizeXl md:text-sizeXXl leading-8;
            }

            p {
              @apply md:block mb-2 leading-8;
            }
          }
        }
      }

      &:nth-child(2),
      &:nth-child(3),
      &:nth-child(4),
      &:nth-child(5) {
        .selected-news-article {
          @apply max-xs:flex;

          .selected-news-thumbnail {
            @apply max-xs:w-1/3;
          }

          .selected-news-details {
            @apply max-xs:w-2/3 max-xs:pl-2;
          }
        }
      }

      &:nth-child(2) {
        @apply row-span-1 col-span-2 ss:row-span-2 ss:col-span-1 md:row-span-2 md:col-span-1 lg:row-span-1 lg:col-span-1;
      }

      &:nth-child(3),
      &:nth-child(4),
      &:nth-child(5) {
        @apply row-span-1 col-span-2 ss:row-span-2 ss:col-span-1 lg:row-span-1 lg:col-span-1 border-t border-light-50 dark:border-dark-divider ss:border-0;
      }
    }
  }

  /* OTHERS NEWS LIST */
  .others-news-list {
    @apply grid ss:grid-cols-2 gap-4 mb-10 lg:grid-cols-4;

    &-item {
      @apply max-sm:row-span-1 max-sm:col-span-2;
      // pt-2 is combined above

      .others-news-article {
        @apply max-sm:flex;

        .others-news-thumbnail {
          @apply max-sm:w-1/3;
        }

        .others-news-details {
          @apply max-sm:w-2/3 max-sm:pl-2;

          h2 {
            @apply text-dark-surface hover:text-dark-hover dark:text-light dark:hover:text-white text-sizeBig font-bold sm:mb-2 md:text-sizeLg leading-6 max-xs:line-clamp-2;
          }

          time {
            @apply text-xs text-dark-hover dark:text-light inline-block;
          }
        }
      }
    }
  }

  /* POPULAR NEWS LIST - No changes here */
  .popular-news-list {
    @apply grid gap-4 grid-flow-col grid-rows-5 md:grid-rows-3 md:grid-cols-2;

    &-link {
      @apply flex items-center gap-4;

      .news-counter,
      .news-title {
        @apply inline-block;
      }

      .news-counter {
        @apply text-primary font-bengali text-size3XXl md:text-5xl lg:text-sizeXXXl;
      }

      .news-title {
        @apply text-dark-surface dark:text-white font-bengali font-bold text-sizeMedium md:text-sizeXl lg:text-size1Xl transition-all;
      }

      &:hover {
        .news-title {
          @apply underline;
        }
      }
    }
  }

  /* TOPIC LIST */
  .topic-list {
    @apply grid ss:grid-cols-2 gap-4 mb-10 lg:grid-cols-4;

    &-item {
      @apply max-sm:row-span-1 max-sm:col-span-2;
      // pt-2 is combined above
    }

    &-article {
      @apply max-sm:flex;
    }

    &-thumbnail {
      @apply max-sm:w-1/3 sm:h-[130px];
    }

    &-details {
      @apply max-sm:w-2/3 max-sm:pl-2;

      h2 {
        @apply text-dark-surface hover:text-dark-hover dark:text-light dark:hover:text-white text-sizeBig font-bold sm:mb-2 md:text-sizeLg leading-6 max-xs:line-clamp-2;
      }

      time {
        @apply text-xs text-dark-hover dark:text-light inline-block;
      }
    }

    .duration {
      @apply absolute bottom-0 left-0 p-3 bg-white flex items-center gap-1 font-semibold text-dark-surface font-sans text-xs;
    }
  }

  /* TOPIC LINK - No changes here */
  .topic-link {
    &:hover {
      h2,
      svg {
        @apply text-primary;
      }

      svg {
        @apply ml-1;
      }
    }
  }

  /* MOSTREAD NEWS LIST - No changes here */
  .mostread-news-list {
    @apply grid gap-2 grid-flow-col grid-rows-5;

    &-item {
      @apply flex items-center;
    }

    &-link {
      @apply flex items-center gap-2 md:gap-4 h-full;

      .news-counter,
      .news-title {
        @apply block;
      }

      .news-counter {
        @apply text-primary font-bengali text-size3XXl md:text-5xl lg:text-sizeXXXl;
      }

      .news-title {
        @apply text-dark-surface dark:text-white font-bengali font-bold text-sizeMedium md:text-sizeBig transition-all;
      }

      &:hover {
        .news-title {
          @apply underline;
        }
      }
    }
  }

  /* PAGE LINK - No changes here */
  .page-link {
    @apply cursor-pointer w-11 h-11 flex items-center justify-center mx-1 border border-transparent text-lg;

    &:hover:not(.active) {
      @apply border-primary;
    }

    &.active {
      @apply border-0 border-b-4 border-primary font-bold;
    }

    &:disabled {
      @apply hidden;
    }
  }

  /*=======================================================
                    FEATURE QUERIES / SUPPORT
=========================================================*/
  /* âœ… Put @supports - No changes here */
  @supports (grid-template-columns: fit-content(var(--footer-col))) {
    .footer-list {
      @apply grid auto-cols-[fit-content(var(--footer-col))] grid-flow-col;
    }
  }

  /*=======================================================
                        KEYFRAMES - No changes here
=========================================================*/
  @keyframes slideUp {
    0% {
      transform: translateY(100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0%);
      opacity: 1;
    }
  }
  @keyframes slideUpFade {
    0% {
      transform: translateY(0%);
      opacity: 1;
    }
    100% {
      transform: translateY(-100%);
      opacity: 0;
    }
  }
  @keyframes slideDownFade {
    0% {
      transform: translateY(-100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0%);
      opacity: 1;
    }
  }
  @keyframes slideUpFadeBottom {
    0% {
      transform: translateY(100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0%);
      opacity: 1;
    }
  }
  @keyframes slideDownFadeBottom {
    0% {
      transform: translateY(0%);
      opacity: 1;
    }
    100% {
      transform: translateY(100%);
      opacity: 0;
    }
  }
}
