<template>
  <ClientOnly>
    <button
      type="button"
      @click="toggleTheme"
      class="transition-colors text-white text-2xl"
    >
      <span v-if="lightMode">
        <i class="fa-solid fa-moon"></i>
      </span>
      <span v-else>
        <i class="fa-solid fa-sun"></i>
      </span>
    </button>
  </ClientOnly>
</template>

<script setup lang="ts">
  import { useColorMode } from '#imports';
  import { computed } from 'vue';

  type Theme = 'light' | 'dark';

  const colorMode = useColorMode();

  const setColorTheme = (newTheme: Theme) => (colorMode.preference = newTheme);

  const toggleTheme = () =>
    setColorTheme(colorMode.preference === 'dark' ? 'light' : 'dark');

  /* Light Mode Check (Reactive) */
  const lightMode = computed(() => colorMode.preference === 'light');

  /**
   *  ğŸŒ™ Dark Mode Toggle Component (DOCUMENTATIONS)
   *
   *  âœï¸ This component provides a button to switch between light and dark themes.
   *  âœï¸ It uses Nuxt's `useColorMode()` composable to manage theme preferences.
   *
   * âš¡Functions:
   *  ğŸ¨ setColorTheme(newTheme: 'light' | 'dark'):
   *  ğŸ‘‰ Sets the color theme to the given value ('light' or 'dark').
   *
   *  ğŸ”„ toggleTheme():
   *  ğŸ‘‰ Toggles the color theme.
   *  ğŸ‘‰ If current theme is 'dark', it switches to 'light'.
   *  ğŸ‘‰ If current theme is 'light', it switches to 'dark'.
   *
   *  ğŸ”¢ Computed:
   *  ğŸ’¡ lightMode (boolean):
   *  ğŸ‘‰ Returns true if the current theme is 'light'.
   *  ğŸ‘‰ Updates reactively when the theme changes.
   *
   *  ğŸ—‚ï¸ Template:
   *  ğŸ‘‰ Shows a moon icon when in light mode (to allow switching to dark mode).
   *  ğŸ‘‰ Shows a sun icon when in dark mode (to allow switching to light mode).
   *  ğŸ‘‰ Uses <ClientOnly> to ensure rendering happens only on the client,
   *     avoiding SSR hydration mismatch errors.
   *
   *  âœï¸ Developer Notes:
   *  ğŸ‘‰ Use `setColorTheme` if you want to explicitly set the theme from outside.
   *  ğŸ‘‰ Use `toggleTheme` for simple user interactions like a button click.
   *  ğŸ‘‰ Use `lightMode` for conditionally rendering UI elements depending on theme.
   *  ğŸ‘‰ The component is fully reactive and will always reflect the current theme.
   */
</script>
